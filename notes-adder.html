<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwiftLink - Notes Adder</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inria+Sans:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="logo">
            <img src="assets/logo2.png" alt="SwiftLink Logo">
        </div>
        <div class="tagline">
            STREAMLINE . SHORTEN . SIMPLIFY
        </div>
        <div class="tools-dropdown">
            <button class="dropdownbtn"><b>Tools</b></button>
            <div class="dropdown-content">
                <a href="url-short.html">URL SHORTENER</a>
                <a href="qr-code-gen.html">QR CODE GENERATOR</a>
                <a href="notes-adder.html">NOTES ADDER</a>
                <a href="calendar.html">CALENDAR</a>
                <a href="translator.html">TRANSLATOR</a>
                <a href="currency-converter.html">CURRENCY CONVERTER</a>
            </div>
        </div>
    </header>
    <main>
        <div class="notes-container">
            <h1>SwiftLink- Notes Adder</h1>
            <div class="note-form">
                <input type="text" id="note-title" placeholder="Enter note title">
                <div class="buttons">
                    <button id="add-note-btn">Add</button>
                    <button id="edit-note-btn" style="display:none;">Edit</button>
                    <button id="delete-note-btn" style="display:none;">Delete</button>
                </div>
            </div>
            <div id="notes-list">
                <!-- Notes will be dynamically added here -->
            </div>
        </div>
    </main>
    <footer>
        <p>MADE WITH <span>❤️</span> BY TEAM SSAV</p>
    </footer>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
        import { getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, getDocs } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-firestore.js";

        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCVc09kuS08iwwky7PlX-3isJXHuSOQWOc",
            authDomain: "swiftlink-48d4f.firebaseapp.com",
            projectId: "swiftlink-48d4f",
            storageBucket: "swiftlink-48d4f.appspot.com",
            messagingSenderId: "820735048662",
            appId: "1:820735048662:web:d8b239066781c6cb188277",
            measurementId: "G-2VN60N67E6"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const notesCollection = collection(db, "notes");

        let currentNoteId = null;

        document.getElementById('add-note-btn').addEventListener('click', async () => {
            const title = document.getElementById('note-title').value;
            if (title.trim() === '') {
                alert('Please enter a note title.');
                return;
            }

            await addDoc(notesCollection, {
                title
            });

            document.getElementById('note-title').value = '';
            loadNotes();
        });

        document.getElementById('edit-note-btn').addEventListener('click', async () => {
            const title = document.getElementById('note-title').value;
            if (title.trim() === '' || currentNoteId === null) {
                alert('Please enter a note title and select a note to edit.');
                return;
            }

            await updateDoc(doc(db, "notes", currentNoteId), {
                title
            });

            document.getElementById('note-title').value = '';
            document.getElementById('add-note-btn').style.display = 'inline-block';
            document.getElementById('edit-note-btn').style.display = 'none';
            document.getElementById('delete-note-btn').style.display = 'none';
            currentNoteId = null;

            loadNotes();
        });

        document.getElementById('delete-note-btn').addEventListener('click', async () => {
            if (currentNoteId === null) {
                alert('Please select a note to delete.');
                return;
            }

            await deleteDoc(doc(db, "notes", currentNoteId));

            document.getElementById('note-title').value = '';
            document.getElementById('add-note-btn').style.display = 'inline-block';
            document.getElementById('edit-note-btn').style.display = 'none';
            document.getElementById('delete-note-btn').style.display = 'none';
            currentNoteId = null;

            loadNotes();
        });

        async function loadNotes() {
            const querySnapshot = await getDocs(notesCollection);
            const notesList = document.getElementById('notes-list');
            notesList.innerHTML = '';

            querySnapshot.forEach(doc => {
                const note = doc.data();
                const noteId = doc.id;

                const noteElement = document.createElement('div');
                noteElement.className = 'note-item';
                noteElement.innerHTML = `
                    <strong>${note.title}</strong>
                    <button onclick="selectNote('${noteId}', '${note.title}')">Select</button>
                `;
                notesList.appendChild(noteElement);
            });
        }

        window.selectNote = (id, title) => {
            document.getElementById('note-title').value = title;
            document.getElementById('add-note-btn').style.display = 'none';
            document.getElementById('edit-note-btn').style.display = 'inline-block';
            document.getElementById('delete-note-btn').style.display = 'inline-block';
            currentNoteId = id;
        };

        loadNotes();
    </script>
</body>
</html>
